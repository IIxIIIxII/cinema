{% extends 'cinema/base.html' %}

{% block content %}
<div class="row mt-4">
    <div class="col-md-4">
        {% if movie.poster %}
            <img src="{{ movie.poster.url }}" class="img-fluid rounded shadow" alt="{{ movie.title }}">
        {% else %}
            <div class="bg-secondary text-white p-5 rounded text-center">–ù–µ—Ç –ø–æ—Å—Ç–µ—Ä–∞</div>
        {% endif %}
    </div>

    <div class="col-md-8">
        
        <div class="d-flex justify-content-between align-items-center">
            <h1>{{ movie.title }}</h1>
            {% if user.is_superuser %}
            <div>
                <a href="{% url 'movie_edit' movie.id %}" class="btn btn-info btn-sm me-2">
                    ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                </a>
                <a href="{% url 'movie_delete' movie.id %}" class="btn btn-danger btn-sm">
                    üóëÔ∏è –£–¥–∞–ª–∏—Ç—å
                </a>
            </div>
            {% endif %}
        </div>
        
        <p class="lead">{{ movie.description }}</p>
        <hr>
        <p><strong>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</strong> {{ movie.duration_minutes }} –º–∏–Ω.</p>

        <div class="d-flex justify-content-between align-items-center mt-4">
            <h3 class="mb-0">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Å–µ–∞–Ω—Å–æ–≤</h3>
            {% if user.is_superuser %}
            <a href="{% url 'screening_create' movie.id %}" class="btn btn-outline-success btn-sm">
                ‚ûï –î–æ–±–∞–≤–∏—Ç—å —Å–µ–∞–Ω—Å
            </a>
            {% endif %}
        </div>
        
        {% if screenings %}
            <div class="list-group mt-3"> 
                {% for session in screenings %}
                    <a href="{% url 'booking' session.id %}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        <div>
                            <strong>{{ session.start_time|date:"d E (l)" }}</strong> –≤ {{ session.start_time|time:"H:i" }}
                            <br>
                            <small class="text-muted">–ó–∞–ª: {{ session.hall.name }}</small>
                        </div>
                        <span class="badge bg-primary rounded-pill">{{ session.price }} —Å–æ–º</span>
                    </a>
                {% endfor %}
            </div>
        {% else %}
            <p class="text-danger mt-3">–ù–∞ —ç—Ç–æ—Ç —Ñ–∏–ª—å–º –ø–æ–∫–∞ –Ω–µ—Ç —Å–µ–∞–Ω—Å–æ–≤.</p>
        {% endif %}
    </div>
</div>
{% endblock %}